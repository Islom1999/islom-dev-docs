import{_ as n,o as a,c as s,d as t}from"./app-a9a991a6.js";const p={},e=t(`<h1 id="ðŸ“”-upload-file" tabindex="-1"><a class="header-anchor" href="#ðŸ“”-upload-file" aria-hidden="true">#</a> ðŸ“” Upload file</h1><h1 id="_1-tushuncha" tabindex="-1"><a class="header-anchor" href="#_1-tushuncha" aria-hidden="true">#</a> 1 - Tushuncha</h1><p>NestJS-da fayllarni yuklash uchun, multer middleware-dan foydalanish mumkin. Multer, Node.js uchun eng ko&#39;p ishlatiladigan middlewarelar orasida, unda fayl yuklash imkoniyati mavjud.</p><p>Birinchi qadam sifatida, multer paketini o&#39;rnatish kerak. Bu quyidagi buyruq orqali amalga oshiriladi:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install --save multer

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Keyin, Multer modulini app.module.ts fayliga import qilish kerak:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MulterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/platform-express&#39;</span><span class="token punctuation">;</span>

@<span class="token function">Module</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    MulterModule<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      dest<span class="token operator">:</span> <span class="token string">&#39;./uploads&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Yuqoridagi misolda, yuklanadigan fayllar avtomatik ravishda <code>./uploads</code> katalogiga saqlanadi.</p><p>Endi, biror controllerda fayllarni qabul qilish uchun bir route yaratishimiz kerak. Quyidagi misolda, <code>UploadController</code> nomli controller yaratilgan, u <code>uploadFile</code> metodini ishga tushiradi. Ushbu metod, faylni yuklab olishni boshqaradi:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> UploadedFile<span class="token punctuation">,</span> UseInterceptors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/common&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FileInterceptor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/platform-express&#39;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&#39;upload&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>
  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  @<span class="token function">UseInterceptors</span><span class="token punctuation">(</span><span class="token function">FileInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">uploadFile</span><span class="token punctuation">(</span>@<span class="token function">UploadedFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bu yerda <code>FileInterceptor</code> nomli interceptor Multer-dan kelib chiqqan, va <code>file</code> degan nomli form maydonini qabul qiladi. <code>@UploadedFile()</code> decoratori orqali, yuklangan faylni metod parametri sifatida olamiz.</p><p>Endi, siz client tarafiga POST so&#39;rov jo&#39;natishingiz kerak, va form-data sifatida <code>file</code> maydonini yuklash kerak. Siz postman yoki boshqa HTTP client-dan foydalanishingiz mumkin.</p><p>Agar siz fayllarni yuklash jarayonini boshqarish uchun ko&#39;proq nazoratga ega bo&#39;lishni istasangiz, yoki fayllarni boshqa joyga yuklashni xohlasangiz, Multer konfiguratsiyasini o&#39;zgartirishingiz kerak. Buning uchun multer documentation-ga murojaat qilishingiz mumkin.</p><h1 id="_2-hayotiy-misol" tabindex="-1"><a class="header-anchor" href="#_2-hayotiy-misol" aria-hidden="true">#</a> 2 - Hayotiy misol</h1><p>Quyidagi misolga e&#39;tibor bering. Ushbu misolda, faylni yuklash, faylni saqlash uchun ishlatiladigan nomni aniqlash, faylni tekshirish va natijani qaytarish kabi operatsiyalar ko&#39;rsatilgan.</p><p>Birinchi bo&#39;lib, o&#39;rnatilishi kerak bo&#39;lgan paketlarni o&#39;rnating:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install --save multer
npm install --save @types/multer

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Keyin, <code>uploads</code> papkasini yaratamiz va uni Multer uchun destinatsiya sifatida ko&#39;rsatamiz:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MulterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/platform-express&#39;</span><span class="token punctuation">;</span>

@<span class="token function">Module</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    MulterModule<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      dest<span class="token operator">:</span> <span class="token string">&#39;./uploads&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Keyin, <code>upload.controller.ts</code> nomli yangi faylni yaratamiz va uni quyidagicha to&#39;ldiramiz:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> UseInterceptors<span class="token punctuation">,</span> UploadedFile<span class="token punctuation">,</span> HttpException<span class="token punctuation">,</span> HttpStatus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/common&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FileInterceptor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/platform-express&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> diskStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;multer&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> extname <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&#39;upload&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>
  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  @<span class="token function">UseInterceptors</span><span class="token punctuation">(</span><span class="token function">FileInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    storage<span class="token operator">:</span> <span class="token function">diskStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      destination<span class="token operator">:</span> <span class="token string">&#39;./uploads&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> randomName <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>randomName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">extname</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originalname<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">uploadFile</span><span class="token punctuation">(</span>@<span class="token function">UploadedFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpException</span><span class="token punctuation">(</span><span class="token string">&#39;No file provided&#39;</span><span class="token punctuation">,</span> HttpStatus<span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      fileName<span class="token operator">:</span> file<span class="token punctuation">.</span>filename<span class="token punctuation">,</span>
      originalName<span class="token operator">:</span> file<span class="token punctuation">.</span>originalname<span class="token punctuation">,</span>
      path<span class="token operator">:</span> file<span class="token punctuation">.</span>path
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bu yerda, <code>diskStorage</code> funksiyasini ishlatib, saqlash strategiyasini tuzdik. <code>destination</code>ga fayllarni saqlash joyini ko&#39;rsatdik, <code>filename</code>ga esa faylni qanday nomlash kerakligini ko&#39;rsatdik.</p><p>Faylni yuklashdan oldin uni tekshirib, agar fayl mavjud bo&#39;lmasa, HTTP 400 (Bad Request) xatosini yuboramiz. Agar fayl yuklangan bo&#39;lsa, fayl haqida ma&#39;lumotni qaytarib beramiz.</p><p>Endi, siz clientdan POST so&#39;rov yuborishingiz kerak, va form-data sifatida <code>file</code> maydonini yuborishingiz kerak. Siz Postman yoki boshqa HTTP klientidan foydalana olasiz. Post so&#39;rovi quyidagicha bo&#39;lishi kerak:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>POST /upload

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Form-data maydonlarida:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>file: (your file here)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Agar yuklash muvaffaqiyatli bo&#39;lsa, server quyidagi javobni qaytaradi:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;fileName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;randomlyGeneratedFileName.extension&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;originalName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;originalFileName.extension&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uploads/randomlyGeneratedFileName.extension&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bu javob, yuklangan faylning serverdagi nomini (<code>fileName</code>), faylning original nomini (<code>originalName</code>) va faylning serverdagi to&#39;liq yo&#39;lini (<code>path</code>) qaytaradi.</p><p>Shuni yodda tutingki, yuklangan fayllarni o&#39;zgartirish yoki o&#39;chirish uchun sizga qo&#39;shimcha routelar yaratish kerak bo&#39;ladi. Shuningdek, amaliyotda, fayllarni yuklash va ularga murojaat qilish uchun to&#39;liq muhofaza qilinadigan yo&#39;l, masalan, Amazon S3 kabi tashqi xizmatlarga yuklashni ko&#39;zdan kechirishingiz mumkin.</p><p>Yuklab olish jarayonida faylni tekshirish uchun, multer-ni <code>fileFilter</code> funksiyasini ishlatishingiz mumkin. Bu funksiya, fayl yuklanishini ruxsat berish yoki rad etish uchun ishlatiladi. Quyidagi misolda, faqat jpeg yoki png fayllarini qabul qilish uchun <code>fileFilter</code> funksiyasini qo&#39;shganman:</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>@<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
@<span class="token function">UseInterceptors</span><span class="token punctuation">(</span><span class="token function">FileInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  storage<span class="token operator">:</span> <span class="token function">diskStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    destination<span class="token operator">:</span> <span class="token string">&#39;./uploads&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> randomName <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>randomName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">extname</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originalname<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fileFilter</span><span class="token operator">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>mimetype<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token operator">/</span>\\\\<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(jpg|jpeg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpException</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Unsupported file type </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">extname</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originalname<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> HttpStatus<span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token function">uploadFile</span><span class="token punctuation">(</span>@<span class="token function">UploadedFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpException</span><span class="token punctuation">(</span><span class="token string">&#39;No file provided&#39;</span><span class="token punctuation">,</span> HttpStatus<span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    fileName<span class="token operator">:</span> file<span class="token punctuation">.</span>filename<span class="token punctuation">,</span>
    originalName<span class="token operator">:</span> file<span class="token punctuation">.</span>originalname<span class="token punctuation">,</span>
    path<span class="token operator">:</span> file<span class="token punctuation">.</span>path
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bu yerda, <code>fileFilter</code> funksiyasi faylning MIME tipini tekshiradi va faqat jpeg yoki png fayllarini qabul qiladi. Agar boshqa turi bo&#39;lgan fayl yuklanmoqchi bo&#39;lsa, HTTP 400 (Bad Request) xatosi bilan &quot;Unsupported file type&quot; xabarini qaytaradi.</p>`,34),o=[e];function i(l,c){return a(),s("div",null,o)}const r=n(p,[["render",i],["__file","fileUpload.html.vue"]]);export{r as default};
